<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mlpack: SoftmaxErrorFunction&lt; MetricType &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra-stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mlpack
   &#160;<span id="projectnumber">3.4.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemlpack.html">mlpack</a></li><li class="navelem"><a class="el" href="namespacemlpack_1_1nca.html">nca</a></li><li class="navelem"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html">SoftmaxErrorFunction</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmlpack_1_1nca_1_1SoftmaxErrorFunction-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SoftmaxErrorFunction&lt; MetricType &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The "softmax" stochastic neighbor assignment probability function.  
 <a href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aed757d2c1bfdc680098a2544e3eae97e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#aed757d2c1bfdc680098a2544e3eae97e">SoftmaxErrorFunction</a> (const arma::mat &amp;dataset, const arma::Row&lt; size_t &gt; &amp;labels, MetricType metric=MetricType())</td></tr>
<tr class="memdesc:aed757d2c1bfdc680098a2544e3eae97e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize with the given kernel; useful when the kernel has some state to store, which is set elsewhere.  <a href="#aed757d2c1bfdc680098a2544e3eae97e">More...</a><br /></td></tr>
<tr class="separator:aed757d2c1bfdc680098a2544e3eae97e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bf1f5613d393e7b885ed44660ca1069"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a7bf1f5613d393e7b885ed44660ca1069">Evaluate</a> (const arma::mat &amp;covariance)</td></tr>
<tr class="memdesc:a7bf1f5613d393e7b885ed44660ca1069"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate the softmax function for the given covariance matrix.  <a href="#a7bf1f5613d393e7b885ed44660ca1069">More...</a><br /></td></tr>
<tr class="separator:a7bf1f5613d393e7b885ed44660ca1069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4229a84a3552879f556421f3084a8269"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a4229a84a3552879f556421f3084a8269">Evaluate</a> (const arma::mat &amp;covariance, const size_t begin, const size_t batchSize=1)</td></tr>
<tr class="memdesc:a4229a84a3552879f556421f3084a8269"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate the softmax objective function for the given covariance matrix on the given batch size from a given inital point of the dataset.  <a href="#a4229a84a3552879f556421f3084a8269">More...</a><br /></td></tr>
<tr class="separator:a4229a84a3552879f556421f3084a8269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a595b81d2593c99409f31f524fe12bfcf"><td class="memItemLeft" align="right" valign="top">const arma::mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a595b81d2593c99409f31f524fe12bfcf">GetInitialPoint</a> () const</td></tr>
<tr class="memdesc:a595b81d2593c99409f31f524fe12bfcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial point.  <a href="#a595b81d2593c99409f31f524fe12bfcf">More...</a><br /></td></tr>
<tr class="separator:a595b81d2593c99409f31f524fe12bfcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8464e351c740da7124aaa748e171ce4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a8464e351c740da7124aaa748e171ce4b">Gradient</a> (const arma::mat &amp;covariance, arma::mat &amp;gradient)</td></tr>
<tr class="memdesc:a8464e351c740da7124aaa748e171ce4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate the gradient of the softmax function for the given covariance matrix.  <a href="#a8464e351c740da7124aaa748e171ce4b">More...</a><br /></td></tr>
<tr class="separator:a8464e351c740da7124aaa748e171ce4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dc4cf443bea9b2edaef1d437b111ffe"><td class="memTemplParams" colspan="2">template&lt;typename GradType &gt; </td></tr>
<tr class="memitem:a8dc4cf443bea9b2edaef1d437b111ffe"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a8dc4cf443bea9b2edaef1d437b111ffe">Gradient</a> (const arma::mat &amp;covariance, const size_t begin, GradType &amp;gradient, const size_t batchSize=1)</td></tr>
<tr class="memdesc:a8dc4cf443bea9b2edaef1d437b111ffe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate the gradient of the softmax function for the given covariance matrix on the given batch size, from a given initial point of the dataset.  <a href="#a8dc4cf443bea9b2edaef1d437b111ffe">More...</a><br /></td></tr>
<tr class="separator:a8dc4cf443bea9b2edaef1d437b111ffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fa76af34a6e3ea927b307f0c318ee4b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a1fa76af34a6e3ea927b307f0c318ee4b">NumFunctions</a> () const</td></tr>
<tr class="memdesc:a1fa76af34a6e3ea927b307f0c318ee4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of functions the objective function can be decomposed into.  <a href="#a1fa76af34a6e3ea927b307f0c318ee4b">More...</a><br /></td></tr>
<tr class="separator:a1fa76af34a6e3ea927b307f0c318ee4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2697cc8b37d7bca7c055228382a9b208"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a2697cc8b37d7bca7c055228382a9b208">Shuffle</a> ()</td></tr>
<tr class="memdesc:a2697cc8b37d7bca7c055228382a9b208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shuffle the dataset.  <a href="#a2697cc8b37d7bca7c055228382a9b208">More...</a><br /></td></tr>
<tr class="separator:a2697cc8b37d7bca7c055228382a9b208"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename MetricType = metric::SquaredEuclideanDistance&gt;<br />
class mlpack::nca::SoftmaxErrorFunction&lt; MetricType &gt;</h3>

<p>The "softmax" stochastic neighbor assignment probability function. </p>
<p>The actual function is</p>
<p>p_ij = (exp(-|| A x_i - A x_j || ^ 2)) / (sum_{k != i} (exp(-|| A x_i - A x_k || ^ 2)))</p>
<p>where x_n represents a point and A is the current scaling matrix.</p>
<p>This class is more flexible than the original paper, allowing an arbitrary metric function to be used in place of || A x_i - A x_j ||^2, meaning that the squared Euclidean distance is not the only allowed metric for <a class="el" href="classmlpack_1_1nca_1_1NCA.html" title="An implementation of Neighborhood Components Analysis, both a linear dimensionality reduction techniq...">NCA</a>. However, that is probably the best way to use this class.</p>
<p>In addition to the standard <a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a7bf1f5613d393e7b885ed44660ca1069" title="Evaluate the softmax function for the given covariance matrix. ">Evaluate()</a> and <a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a8464e351c740da7124aaa748e171ce4b" title="Evaluate the gradient of the softmax function for the given covariance matrix. ">Gradient()</a> functions which mlpack optimizers use, overloads of <a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a7bf1f5613d393e7b885ed44660ca1069" title="Evaluate the softmax function for the given covariance matrix. ">Evaluate()</a> and <a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html#a8464e351c740da7124aaa748e171ce4b" title="Evaluate the gradient of the softmax function for the given covariance matrix. ">Gradient()</a> are given which only operate on one point in the dataset. This is useful for optimizers like stochastic gradient descent (see mlpack::optimization::SGD). </p>

<p class="definition">Definition at line <a class="el" href="nca__softmax__error__function_8hpp_source.html#l00045">45</a> of file <a class="el" href="nca__softmax__error__function_8hpp_source.html">nca_softmax_error_function.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aed757d2c1bfdc680098a2544e3eae97e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed757d2c1bfdc680098a2544e3eae97e">&#9670;&nbsp;</a></span>SoftmaxErrorFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlpack_1_1nca_1_1SoftmaxErrorFunction.html">SoftmaxErrorFunction</a> </td>
          <td>(</td>
          <td class="paramtype">const arma::mat &amp;&#160;</td>
          <td class="paramname"><em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const arma::Row&lt; size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MetricType&#160;</td>
          <td class="paramname"><em>metric</em> = <code>MetricType()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize with the given kernel; useful when the kernel has some state to store, which is set elsewhere. </p>
<p>If no kernel is given, an empty kernel is used; this way, you can call the constructor with no arguments. A reference to the dataset we will be optimizing over is also required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataset</td><td>Matrix containing the dataset. </td></tr>
    <tr><td class="paramname">labels</td><td>Vector of class labels for each point in the dataset. </td></tr>
    <tr><td class="paramname">metric</td><td>Instantiated metric (optional). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7bf1f5613d393e7b885ed44660ca1069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bf1f5613d393e7b885ed44660ca1069">&#9670;&nbsp;</a></span>Evaluate() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Evaluate </td>
          <td>(</td>
          <td class="paramtype">const arma::mat &amp;&#160;</td>
          <td class="paramname"><em>covariance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate the softmax function for the given covariance matrix. </p>
<p>This is the non-separable implementation, where the objective function is not decomposed into the sum of several objective functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">covariance</td><td>Covariance matrix of Mahalanobis distance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4229a84a3552879f556421f3084a8269"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4229a84a3552879f556421f3084a8269">&#9670;&nbsp;</a></span>Evaluate() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Evaluate </td>
          <td>(</td>
          <td class="paramtype">const arma::mat &amp;&#160;</td>
          <td class="paramname"><em>covariance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>batchSize</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate the softmax objective function for the given covariance matrix on the given batch size from a given inital point of the dataset. </p>
<p>This is the separable implementation, where the objective function is decomposed into the sum of many objective functions, and here, only one of those constituent objective functions is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">covariance</td><td>Covariance matrix of Mahalanobis distance. </td></tr>
    <tr><td class="paramname">begin</td><td>Index of the initial point to use for objective function. </td></tr>
    <tr><td class="paramname">batchSize</td><td>Number of points to use for objective function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a595b81d2593c99409f31f524fe12bfcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a595b81d2593c99409f31f524fe12bfcf">&#9670;&nbsp;</a></span>GetInitialPoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const arma::mat GetInitialPoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial point. </p>

</div>
</div>
<a id="a8464e351c740da7124aaa748e171ce4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8464e351c740da7124aaa748e171ce4b">&#9670;&nbsp;</a></span>Gradient() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Gradient </td>
          <td>(</td>
          <td class="paramtype">const arma::mat &amp;&#160;</td>
          <td class="paramname"><em>covariance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">arma::mat &amp;&#160;</td>
          <td class="paramname"><em>gradient</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate the gradient of the softmax function for the given covariance matrix. </p>
<p>This is the non-separable implementation, where the objective function is not decomposed into the sum of several objective functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">covariance</td><td>Covariance matrix of Mahalanobis distance. </td></tr>
    <tr><td class="paramname">gradient</td><td>Matrix to store the calculated gradient in. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8dc4cf443bea9b2edaef1d437b111ffe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dc4cf443bea9b2edaef1d437b111ffe">&#9670;&nbsp;</a></span>Gradient() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Gradient </td>
          <td>(</td>
          <td class="paramtype">const arma::mat &amp;&#160;</td>
          <td class="paramname"><em>covariance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GradType &amp;&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>batchSize</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate the gradient of the softmax function for the given covariance matrix on the given batch size, from a given initial point of the dataset. </p>
<p>This is the separable implementation, where the objective function is decomposed into the sum of many objective functions, and here, only one of those constituent objective functions is returned. The type of the gradient parameter is a template argument to allow the computation of a sparse gradient.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">GradType</td><td>The type of the gradient out-param. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">covariance</td><td>Covariance matrix of Mahalanobis distance. </td></tr>
    <tr><td class="paramname">begin</td><td>Index of the initial point to use for objective function. </td></tr>
    <tr><td class="paramname">batchSize</td><td>Number of points to use for objective function. </td></tr>
    <tr><td class="paramname">gradient</td><td>Matrix to store the calculated gradient in. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1fa76af34a6e3ea927b307f0c318ee4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fa76af34a6e3ea927b307f0c318ee4b">&#9670;&nbsp;</a></span>NumFunctions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t NumFunctions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of functions the objective function can be decomposed into. </p>
<p>This is just the number of points in the dataset. </p>

<p class="definition">Definition at line <a class="el" href="nca__softmax__error__function_8hpp_source.html#l00132">132</a> of file <a class="el" href="nca__softmax__error__function_8hpp_source.html">nca_softmax_error_function.hpp</a>.</p>

</div>
</div>
<a id="a2697cc8b37d7bca7c055228382a9b208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2697cc8b37d7bca7c055228382a9b208">&#9670;&nbsp;</a></span>Shuffle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Shuffle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shuffle the dataset. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/aakash/mlpack/src/mlpack/methods/nca/<a class="el" href="nca__softmax__error__function_8hpp_source.html">nca_softmax_error_function.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
<script type="text/javascript">
var x = document.querySelectorAll("img.formulaDsp");
var i;
for (i = 0; i < x.length; i++)
{
  x[i].width = x[i].offsetWidth / 4;
}
</script>
</html>
